<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:JournalForge.ViewModels"
             x:Class="JournalForge.Pages.SettingsPage"
             x:DataType="viewmodels:SettingsViewModel"
             Title="{Binding Title}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">
            
            <!-- Header -->
            <Label Text="âš™ï¸ Settings âš™ï¸" 
                   Style="{StaticResource RPGHeaderLarge}"
                   HorizontalOptions="Center"
                   Margin="0,20,0,10"/>

            <!-- Google Account Section -->
            <Frame Style="{StaticResource RPGCard}">
                <VerticalStackLayout Spacing="15">
                    <Label Text="â˜ï¸ Cloud Sync" 
                           Style="{StaticResource RPGHeaderMedium}"
                           TextColor="{StaticResource RPGBlue}"/>
                    
                    <Label Text="Sign in with Google to save your entries to the cloud and sync across devices."
                           FontSize="13"
                           TextColor="{StaticResource RPGTextSecondary}"
                           LineBreakMode="WordWrap"/>

                    <!-- Not Signed In State -->
                    <VerticalStackLayout Spacing="10" IsVisible="{Binding IsNotSignedIn}">
                        <Frame BackgroundColor="{StaticResource RPGParchment}"
                               BorderColor="{StaticResource RPGBrown}"
                               CornerRadius="8"
                               Padding="15">
                            <VerticalStackLayout Spacing="8">
                                <Label Text="ðŸ”’ Not Connected" 
                                       FontFamily="OpenSansSemibold"
                                       FontSize="14"
                                       TextColor="{StaticResource RPGDarkBrown}"/>
                                <Label Text="Your entries are currently saved only on this device."
                                       FontSize="12"
                                       TextColor="{StaticResource RPGTextSecondary}"
                                       LineBreakMode="WordWrap"/>
                            </VerticalStackLayout>
                        </Frame>
                        
                        <Button Text="ðŸ” Sign In with Google"
                                Command="{Binding SignInCommand}"
                                Style="{StaticResource RPGButtonPrimary}"
                                IsEnabled="{Binding IsNotBusy}"/>
                        
                        <Label Text="Note: Google Sign-In requires additional setup. See documentation for configuration instructions."
                               FontSize="11"
                               TextColor="{StaticResource RPGTextSecondary}"
                               LineBreakMode="WordWrap"
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"
                               Margin="0,5,0,0"/>
                    </VerticalStackLayout>

                    <!-- Signed In State -->
                    <VerticalStackLayout Spacing="10" IsVisible="{Binding IsSignedIn}">
                        <Frame BackgroundColor="#E8F5E9"
                               BorderColor="{StaticResource RPGGreen}"
                               CornerRadius="8"
                               Padding="15">
                            <VerticalStackLayout Spacing="8">
                                <Label Text="âœ… Connected" 
                                       FontFamily="OpenSansSemibold"
                                       FontSize="14"
                                       TextColor="{StaticResource RPGDarkBrown}"/>
                                <Label Text="{Binding UserEmail}"
                                       FontSize="13"
                                       TextColor="{StaticResource RPGDarkBrown}"/>
                                <Label Text="{Binding LastSyncText}"
                                       FontSize="11"
                                       TextColor="{StaticResource RPGTextSecondary}"/>
                            </VerticalStackLayout>
                        </Frame>

                        <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                            <Button Text="ðŸ”„ Sync Now"
                                    Command="{Binding SyncNowCommand}"
                                    Style="{StaticResource RPGButtonPrimary}"
                                    IsEnabled="{Binding IsNotBusy}"
                                    FontSize="12"
                                    Grid.Column="0"/>
                            <Button Text="ðŸšª Sign Out"
                                    Command="{Binding SignOutCommand}"
                                    Style="{StaticResource RPGButtonSecondary}"
                                    IsEnabled="{Binding IsNotBusy}"
                                    FontSize="12"
                                    Grid.Column="1"/>
                        </Grid>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Cloud Sync Benefits -->
            <Frame Style="{StaticResource RPGCard}">
                <VerticalStackLayout Spacing="10">
                    <Label Text="âœ¨ Benefits of Cloud Sync" 
                           Style="{StaticResource RPGHeaderMedium}"
                           TextColor="{StaticResource RPGGold}"/>
                    
                    <VerticalStackLayout Spacing="8">
                        <HorizontalStackLayout Spacing="10">
                            <Label Text="ðŸ’¾" FontSize="18" VerticalOptions="Center"/>
                            <Label Text="Automatic backup of all your entries"
                                   FontSize="13"
                                   TextColor="{StaticResource RPGTextSecondary}"
                                   VerticalOptions="Center"
                                   LineBreakMode="WordWrap"
                                   HorizontalOptions="FillAndExpand"/>
                        </HorizontalStackLayout>
                        
                        <HorizontalStackLayout Spacing="10">
                            <Label Text="ðŸ“±" FontSize="18" VerticalOptions="Center"/>
                            <Label Text="Access your journal from multiple devices"
                                   FontSize="13"
                                   TextColor="{StaticResource RPGTextSecondary}"
                                   VerticalOptions="Center"
                                   LineBreakMode="WordWrap"
                                   HorizontalOptions="FillAndExpand"/>
                        </HorizontalStackLayout>
                        
                        <HorizontalStackLayout Spacing="10">
                            <Label Text="ðŸ”’" FontSize="18" VerticalOptions="Center"/>
                            <Label Text="Secure storage protected by Google authentication"
                                   FontSize="13"
                                   TextColor="{StaticResource RPGTextSecondary}"
                                   VerticalOptions="Center"
                                   LineBreakMode="WordWrap"
                                   HorizontalOptions="FillAndExpand"/>
                        </HorizontalStackLayout>
                        
                        <HorizontalStackLayout Spacing="10">
                            <Label Text="ðŸ”„" FontSize="18" VerticalOptions="Center"/>
                            <Label Text="Never lose your entries even if you lose your device"
                                   FontSize="13"
                                   TextColor="{StaticResource RPGTextSecondary}"
                                   VerticalOptions="Center"
                                   LineBreakMode="WordWrap"
                                   HorizontalOptions="FillAndExpand"/>
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- About Section -->
            <Frame Style="{StaticResource RPGCard}">
                <VerticalStackLayout Spacing="10">
                    <Label Text="â„¹ï¸ About JournalForge" 
                           Style="{StaticResource RPGHeaderMedium}"
                           TextColor="{StaticResource RPGPurple}"/>
                    
                    <Label Text="JournalForge - AI-Powered Journaling"
                           FontFamily="OpenSansSemibold"
                           FontSize="14"
                           TextColor="{StaticResource RPGDarkBrown}"/>
                    
                    <Label Text="Version 1.0.4"
                           FontSize="13"
                           TextColor="{StaticResource RPGTextSecondary}"/>
                    
                    <Label Text="Chronicle your journey with AI assistance and RPG-style adventure."
                           FontSize="12"
                           TextColor="{StaticResource RPGTextSecondary}"
                           LineBreakMode="WordWrap"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Activity Indicator -->
            <ActivityIndicator IsRunning="{Binding IsBusy}"
                              IsVisible="{Binding IsBusy}"
                              Color="{StaticResource RPGGold}"
                              Margin="0,20,0,0"/>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
